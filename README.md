# PXL Node.js Framework

## Installation

Clone this repository and switch to the project specific Node.js version:

```sh
nvm use
```

## Use library in project

### Publish using Yalc

Use [Yalc](https://github.com/wclr/yalc) to publish the library for local usage using the following command:

```sh
yalc publish
```

### Import in project

After the library has been published with **Yalc**, add it to a project with the following command:

```sh
yalc add @pxl/nodejs-framework
```

And start using in project:

```ts
import { Application } from '@pxl/nodejs-framework';

const app = new Application({
  // ...
});
```

## Development

### Local Development

For local development with automatic publishing through **Yalc**:

```sh
npm run dev
```

For building locally with Yalc publishing:

```sh
npm run build:local
```

For building without Yalc (CI/production build):

```sh
npm run build
```

## CI/CD Pipeline

This project uses GitHub Actions for continuous integration and deployment:

### Build and Test (CI)
- Runs on all pull requests
- Installs dependencies, runs linting, builds the project, and runs tests

### Build and Publish
- Runs on pushes to `main`/`master` branches and version tags
- Builds the project and publishes to npm
- Beta releases are published on pushes to main/master branches
- Stable releases are published when version tags are created

### Setup for Publishing

To enable automatic publishing, configure the following repository secret:
- `NPM_TOKEN`: Your npm authentication token

> **Note**: The `dist/` folder is gitignored and automatically generated during the CI/CD process. Do not commit built files to the repository.

## Releasing

Use the built-in release script to create new versions:

### Quick Release Commands

```sh
# Patch release (1.0.0 → 1.0.1)
npm run release -- --patch

# Minor release (1.0.0 → 1.1.0)
npm run release -- --minor

# Major release (1.0.0 → 2.0.0)
npm run release -- --major

# Specific version
npm run release -- --version 2.1.3
```

### Release Process

The release script will:
1. Check that your working directory is clean
2. Verify you're on the main/master branch
3. Update the version in `package.json`
4. Create a git commit and tag
5. Push to origin, triggering GitHub Actions

### Dry Run

Preview what the release script will do without making changes:

```sh
npm run release -- --patch --dry-run
```

### Help

For more information about the release script:

```sh
npm run release -- --help
```

## Documentation

The API documentation is automatically generated using TypeDoc and deployed via GitHub Actions to GitHub Pages.

### Local Documentation Development

To generate and view documentation locally:

```sh
npm run docs
```

This will generate the documentation in the `docs/` folder. You can then open `docs/index.html` in your browser.

### Automated Documentation Deployment

Documentation is automatically built and deployed to GitHub Pages when:
- Code is pushed to the `main` or `master` branch
- Pull requests are opened against `main` or `master` branch
- Manual workflow dispatch is triggered

The documentation will be available at: `https://[your-username].github.io/[repository-name]/`

> **Note**: The `docs/` folder is gitignored and should not be committed to the repository as it's automatically generated by the CI/CD pipeline.
